<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: event.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: event.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Event
 * @type {Object}
 * @implements {utils}
 */
const Event = Object.create(null);

/**
 * init
 * @memberOf Event
 * @description Initializes the event object.
 * @return {Event}
 */
Event.init = function initEvent() {
  this.callbacks = {};
  return this;
};

/**
 * emit
 * @description Executes the handeler that assocaited with the emitted event.
 * @param {Array} args
 * @return {Event}
 */
Event.emit = function emit(...args) {
  const [event, ...rest] = args;

  if (!event) {
    throw new TypeError("Event: Please provide truthy arguments");
  }

  this.callbacks[event] = this.callbacks[event] || [];

  if (this.callbacks[event].length) {
    this.callbacks[event].forEach((callback) => {
      callback(...rest);
    });
  }

  return this;
};

/**
 * on
 * @description Attach a handler to an event.
 * @param  {String}   event
 * @param  {Function} fn
 * @param  {Object}   context
 * @return {Event}
 */
Event.on = function on(event, fn, context) {
  if (!event || !fn) {
    throw new TypeError("Event: Please provide truthy arguments");
  }

  if (context) {
    fn = fn.bind(context);
  }

  const events = event.split(" ");

  this.callbacks = this.callbacks || {};

  events.forEach((e) => {
    this.callbacks[e] = this.callbacks[e] || [];

    if (!this.callbacks[e].length) {
      this.callbacks[e].push(fn);
      return this;
    }

    // Dont create duplicates of the same handeled function.
    // If you want your function run twice wrap it in a function.
    return this.callbacks[e].every((cb, i, col) => {
      return cb !== fn;
    }) ? this.callbacks[e].push(fn) :
      console.warn(`Event: That function ${fn} has already been declared a` +
        "handler for this event.");
  });

  return this;
};

/**
 * off
 * @description Remove an event handeler.
 * @param  {String}   event
 * @param  {Function} fn
 * @return {Event}
 */
Event.off = function off(...args) {
  const [event, fn] = args;

  if (!event) {
    this.callbacks = {};
    return this;
  }

  let callbacks = this.callbacks[event];

  if (!callbacks) {
    console.warn(`Event: No event named ${event} has been registered`);
    return this;
  }

  if (!fn) {
    delete this.callbacks[event];
    return this;
  }

  this.callbacks[event] = callbacks.filter((cb) => cb !== fn);

  return this;
};

/**
 * listeners - Return all callbacks attached to a certain event
 * @param  {any&lt;Array>} args
 * @return {function[]}
 */
Event.listeners = function listeners(...args) {
  const [event] = args;

  if (!event) {
    return Object.keys(this.callbacks);
  }

  if (!this.callbacks[event]) {
    console.warn(`Event: No event named ${event} has been registered`);
  }

  return this.callbacks[event];
};

Event.once = function once(...args) {
  const self = this;
  const [event, fn, context] = args;

  const wrap = function wrap() {
    fn.bind(context)();
    self.off(event, wrap);
  };

  this.on(event, wrap, context);
};

// Aliases //
Event.removeListener = Event.removeAllListeners = Event.off;
Event.fire = Event.emit;
Event.addListener = Event.on;
Event.get = Event.listeners;

module.exports = Event;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Particle.html">Particle</a></li><li><a href="Shapes.html">Shapes</a></li></ul><h3>Global</h3><ul><li><a href="global.html#Event">Event</a></li><li><a href="global.html#extend">extend</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.3</a> on Mon Aug 07 2017 11:41:57 GMT+1000 (AEST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
